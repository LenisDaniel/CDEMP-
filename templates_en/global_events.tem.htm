<style>
    .date_field {position: relative; z-index:100;}
</style>
<div class="portlet box red">
    <div class="portlet-title">
        <div class="caption">
            <i class="fa fa-list"></i>{form_title}
        </div>
        <div class="tools">
            <a href="javascript:;" class="collapse"></a>
            <a href="javascript:;" class="reload"></a>
        </div>
    </div>
    <div class="portlet-body form">
        <!-- BEGIN FORM-->
        <form id="admins_form" action="{form_action}" method="POST" class="form-horizontal">
            <div class="form-body">
                <h3 class="form-section">Event Info</h3>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group required">
                            <label class="control-label col-md-2">Event Title:</label>
                            <div class="col-md-6">
                                <input type="text" name="event_descr" id="event_descr" class="form-control" placeholder="" value="{event_descr}" required>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="control-label col-md-2">Date:</label>
                            <div class="col-md-6">
                                <input type="text" name="event_date" id="event_date" class="form-control date_field" value="{event_date}" required>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="control-label col-md-2">Time:</label>
                            <div class="col-md-6">
                                <input type="text" name="event_time" id="event_time" class="form-control" value="{event_time}" required>
                            </div>
                        </div>
                    </div>
                </div>
                <!--/row-->
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group required">
                            <label class="control-label col-md-2">Content:</label>
                            <div class="col-md-9">
                                <textarea name="event_details" id="event_details">{event_details}</textarea>
                            </div>
                        </div>
                    </div>

                </div>
                <!--/row-->
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group required">
                        <label class="control-label col-md-2">Active?:</label>
                        <div class="col-md-9">
                            <div class="radio-list">
                                <label class="radio-inline">
                                    <input type="radio" name="active" value="1" {option1}/>
                                    Yes
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="active" value="2" {option2}/>
                                    No
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <input type="hidden" id="admin_id" value="{admin_id}">
            <input type="hidden" id="group" name="group" value="0">
            <input type="hidden" id="course" name="course" value="0">
            <div class="form-actions">
                <div class="row">
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-offset-3 col-md-9">
                                <button type="submit" class="btn green">{send_button}</button>
                                <button type="button" class="btn default">Cancel</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                    </div>
                </div>
            </div>
        </form>
        <!-- END FORM-->
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet box red">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-globe"></i>Events List
                </div>
                <div class="tools">
                    <a href="javascript:;" class="collapse"></a>
                    <a href="javascript:;" class="reload"></a>
                </div>
            </div>
            <div class="portlet-body">
                <div class="table-toolbar">
                    <div class="row">
                        <div class="col-md-6">
                            <!-- <div class="btn-group">
                                <button id="sample_editable_1_new" class="btn green">
                                Add New <i class="fa fa-plus"></i>
                                </button>
                            </div> -->
                        </div>
                        <div class="col-md-6">
                            <div class="btn-group pull-right">
                                <button class="btn dropdown-toggle" data-toggle="dropdown">Tools <i class="fa fa-angle-down"></i>
                                </button>
                                <ul class="dropdown-menu pull-right">
                                    <li id="export_to_excel">
                                        <a>Export to Excel</a>
                                    </li>
                                    <!--<li>-->
                                    <!--<a>Save as PDF</a>-->
                                    <!--</li>-->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <table class="table table-striped table-bordered table-hover" data-toggle="table" data-pagination="true">
                    <thead>
                    <tr>
                        <th>
                            ID
                        </th>
                        <th>
                            Group
                        </th>
                        <th>
                            Course
                        </th>
                        <th>
                            Event Title
                        </th>
                        <th>
                            Active
                        </th>
                        <th>
                            Created Date
                        </th>
                    </tr>
                    </thead>
                    <tbody>

                    {events_td}

                    </tbody>
                </table>
            </div>
        </div>
        <!-- END EXAMPLE TABLE PORTLET-->
    </div>
</div>

<script>

    $(document).ready(function(){
        $('#event_date').datepicker({
            dateFormat: "yy-mm-dd",

        });

        $('#event_time').timepicker();
    });


    $(function(){

        $('#event_details').froalaEditor({
            toolbarButtons: ['fullscreen', 'bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', '|', 'fontFamily', 'fontSize', 'color', 'inlineStyle', 'paragraphStyle', '|', 'paragraphFormat', 'align', 'formatOL', 'formatUL', 'outdent', 'indent', 'quote', '-', 'insertLink', 'insertImage', 'insertVideo', 'insertFile', 'insertTable', '|', 'emoticons', 'specialCharacters', 'insertHR', 'selectAll', 'clearFormatting', '|', 'print', 'help', 'html', '|', 'undo', 'redo'],
            pluginsEnabled: null,
            height: 300,

            imageUploadParam: 'file',
            imageUploadURL: 'includes/ajax.fileuploader.php',
            imageUploadParams: {id: '1'},
            imageUploadMethod: 'POST',
            imageMaxSize: 3 * 1024 * 1024,
            imageAllowedTypes: ['jpeg', 'jpg', 'png'],

            // Set the file upload parameter.
            fileUploadParam: 'file_param',
            // Set the file upload URL.
            fileUploadURL: 'includes/ajax.fileuploader.php',
            // Additional upload params.
            fileUploadParams: {id: '2'},
            // Set request type.
            fileUploadMethod: 'POST',
            // Set max file size to 20MB.
            fileMaxSize: 5 * 1024 * 1024,
            // Allow to upload any file.
            fileAllowedTypes: ['*']
        })
            .on('froalaEditor.image.beforeUpload', function (e, editor, images) {
                //alert("evento antes de subir la imagen");
            })
            .on('froalaEditor.image.uploaded', function (e, editor, response) {
                //alert(response);
                //alert(response);
            })
            .on('froalaEditor.image.inserted', function (e, editor, $img, response) {
                //alert('Image was inserted in the editor.');
            })
            .on('froalaEditor.image.replaced', function (e, editor, $img, response) {
                // Image was replaced in the editor.
                //alert('Image was replaced in the editor.');
            })

            .on('froalaEditor.image.error', function (e, editor, error, response) {
                // Bad link.
                if (error.code == 1){
                    //alert('bad link');
                }
                // No link in upload response.
                else if (error.code == 2){
                    //alert('No link in upload response.');
                }
                // Error during image upload.
                else if (error.code == 3){
                    //alert('Error during image upload.');
                }
                // Parsing response failed.
                else if (error.code == 4){
                    //alert('Parsing response failed.');
                }
                // Image too text-large.
                else if (error.code == 5){
                    //alert('Image too text-large.');
                }
                // Invalid image type.
                else if (error.code == 6){
                    //alert('Invalid image type.');
                }
                // Image can be uploaded only to same domain in IE 8 and IE 9.
                else if (error.code == 7){
                    //alert('Image can be uploaded only to same domain in IE 8 and IE 9.');
                }
                // Response contains the original server response to the request if available.
            })
            .on('froalaEditor.file.beforeUpload', function (e, editor, files) {
                // Return false if you want to stop the file upload.
                //alert("entre");
            })
            .on('froalaEditor.file.uploaded', function (e, editor, response) {
                // File was uploaded to the server.
            })
            .on('froalaEditor.file.inserted', function (e, editor, $file, response) {
                // File was inserted in the editor.
            })
            .on('froalaEditor.file.error', function (e, editor, error, response) {
                // Bad link.
                if (error.code == 1){
                    alert('bad link');
                }
                // No link in upload response.
                else if (error.code == 2){
                    alert('No link in upload response.');
                }
                // Error during file upload.
                else if (error.code == 3){
                    alert('Error during file upload.');
                }
                // Parsing response failed.
                else if (error.code == 4){
                    alert('Parsing response failed.');
                }
                // File too text-large.
                else if (error.code == 5){
                    alert('File too text-large.');
                }
                // Invalid file type.
                else if (error.code == 6){
                    alert('Invalid file type.');
                }
                // File can be uploaded only to same domain in IE 8 and IE 9.
                else if (error.code == 7){
                    alert('File can be uploaded only to same domain in IE 8 and IE 9.');
                }
                // Response contains the original server response to the request if available.
            })

    });


    $("#export_to_excel").click(function(event){
        $(".table").table2excel({
            name: "Global Events List",
            filename: "global_events_list",
            fileext: ".xls"
        });

    });

</script>